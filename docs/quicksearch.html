<html>
<head>
</head>
<body style="background: transparent;">
<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/lunr.min.js"></script>
<script src="scripts/fulltext-search.js"></script>

<script type="text/x-docstrap-searchdb">
    {"index.js.html":{"id":"index.js.html","title":"Source: index.js","body":" Userscript Utils Modules userscript-utilsuserscript-utils/getMetablockuserscript-utils/getUpdateMetablock Global Global Source: index.js /** * @callback UserscriptUtilsErrStringCallback * @author Art &lt;a.molcanovas@gmail.com&gt; * @param {Error|null} err An error in the operation, if any. * @param {string|null} result Results of the operation. Will be null if an error occurred. */ var getMetablock = require('./lib/get-metablock'), getUpdateMetablock = require('./lib/get-update-metablock'); /** * Useful tools for developing userscripts * @author Art &lt;a.molcanovas@gmail.com&gt; * @module userscript-utils */ module.exports = { /** * Get the entire metadata block from a file * @type {module:userscript-utils/getMetablock} */ getMetablock: getMetablock, /** * Get the part of the metadatablock that's required for .meta.js file and @updateURL * @type {module:userscript-utils/getUpdateMetablock} */ getUpdateMetablock: getUpdateMetablock }; × Search results Close "},"lib_get-metablock.js.html":{"id":"lib_get-metablock.js.html","title":"Source: lib/get-metablock.js","body":" Userscript Utils Modules userscript-utilsuserscript-utils/getMetablockuserscript-utils/getUpdateMetablock Global Global Source: lib/get-metablock.js var fs = require('fs'), async = require('async').nextTick, regexStart = /^(\\s*\\/\\/\\s?==userscript)\\s?==/im, regexEnd = /^(\\s*\\/\\/\\s?==\\/userscript\\s?==)/im; /** * Extract the entire metadata block * @author Art &lt;a.molcanovas@gmail.com&gt; * @exports userscript-utils/getMetablock */ var exp = { /** * Synchronously extracts the metablock from the given file * @author Art &lt;a.molcanovas@gmail.com&gt; * @param {string} file Path to the file * @returns {string} The extracted metadata block * @throws Error If the metadata block is not found or a FS error occurds (e.g. file not found) */ fromFileSync: function (file) { fs.accessSync(file, fs.R_OK); return exp.fromStringSync(fs.readFileSync(file, 'utf8')); }, /** * Asynchronously extracts the metablock from the given file * @author Art &lt;a.molcanovas@gmail.com&gt; * @param {string} file Path to the file * @param {UserscriptUtilsErrStringCallback} callback The callback function */ fromFile: function (file, callback) { fs.access(file, fs.R_OK, function (err) { if (err) { callback(err, null); } else { fs.readFile(file, 'utf8', function (err, contents) { if (err) { callback(err, null); } else { exp.fromString(contents, callback); } }); } }); }, /** * Synchronously extracts the metablock from the given string * @author Art &lt;a.molcanovas@gmail.com&gt; * @param {string} contents The string to extract from * @returns {string} The extracted metadata block * @throws {Error} If the metadata block is not found */ fromStringSync: function (contents) { var split1 = contents.split(regexEnd), split2; if (split1.length === 3) { split2 = split1[0].split(regexStart); if (split2.length === 3) { return (split2[1] + split2[2] + split1[1]).trim(); } } throw new Error(&quot;Metadata block not found&quot;); }, /** * Asynchronously extracts the metablock from the given string * @author Art &lt;a.molcanovas@gmail.com&gt; * @param {string} contents The string to extract from * @param {UserscriptUtilsErrStringCallback} callback The callback function */ fromString: function (contents, callback) { async(function () { try { callback(null, exp.fromStringSync(contents)); } catch (e) { callback(e, null); } }); } }; module.exports = exp; × Search results Close "},"lib_get-update-metablock.js.html":{"id":"lib_get-update-metablock.js.html","title":"Source: lib/get-update-metablock.js","body":" Userscript Utils Modules userscript-utilsuserscript-utils/getMetablockuserscript-utils/getUpdateMetablock Global Global Source: lib/get-update-metablock.js var async = require('async').nextTick, tags = [ '@name', '@version', '@namespace' ], cloneTags = function () { var r = [], i = 0; for (; i &lt; tags.length; i++) { r.push(tags[i]); } return r; }, getMetablock = require('./get-metablock'); /** * Extract the part of the metablock that's needed for @updateURL requests * @author Art &lt;a.molcanovas@gmail.com&gt; * @exports userscript-utils/getUpdateMetablock */ var exp = { /** * Synchronously extract the update metablock from the given string * @author Art &lt;a.molcanovas@gmail.com&gt; * @param {string} str The string to extract from * @param {boolean} [incUpdateURL=false] Whether to include the @updateURL tag * @param {boolean} [incDownloadURL=false] Whether to include the @downloadURL tag * @returns {string} The reduced metadata block suitable for .meta.js files * @throws {Error} if the metadata block is not found */ fromStringSync: function (str, incUpdateURL, incDownloadURL) { var out = [], tags = cloneTags(), lc, i; if (typeof(incUpdateURL) === &quot;boolean&quot; &amp;&amp; incUpdateURL) { tags.push(&quot;@updateurl&quot;); } if (typeof(incDownloadURL) === &quot;boolean&quot; &amp;&amp; incDownloadURL) { tags.push(&quot;@downloadurl&quot;); } str.split(/\\n/).forEach(function (line) { lc = line.toLowerCase(); for (i = 0; i &lt; tags.length; i++) { if (lc.indexOf(tags[i]) !== -1) { out.push(line.trim()); break; } } }); if (!out.length) { throw new Error(&quot;Metablock not found&quot;); } else { return &quot;// ==UserScript==\\n&quot; + out.join(&quot;\\n&quot;) + &quot;\\n// ==/UserScript==&quot;; } }, /** * Asynchronously extract the update metablock from the given string * @author Art &lt;a.molcanovas@gmail.com&gt; * @param {string} str The string to extract from * @param {UserscriptUtilsErrStringCallback} callback The callback function * @param {boolean} [incUpdateURL=false] Whether to include the @updateURL tag * @param {boolean} [incDownloadURL=false] Whether to include the @downloadURL tag */ fromString: function (str, callback, incUpdateURL, incDownloadURL) { async(function () { try { callback(null, exp.fromStringSync(str, incUpdateURL, incDownloadURL)); } catch (e) { callback(e, null); } }); }, /** * Synchronously extract the update metablock from the given file * @author Art &lt;a.molcanovas@gmail.com&gt; * @param {string} file Path to the file * @param {boolean} [incUpdateURL=false] Whether to include the @updateURL tag * @param {boolean} [incDownloadURL=false] Whether to include the @downloadURL tag * @returns {string} The reduced metadata block suitable for .meta.js files * @throws {Error} if the metadata block is not found */ fromFileSync: function (file, incUpdateURL, incDownloadURL) { return exp.fromStringSync(getMetablock.fromFileSync(file), incUpdateURL, incDownloadURL); }, /** * Asynchronously extract the update metablock from the given file * @author Art &lt;a.molcanovas@gmail.com&gt; * @param {string} file Path to the file * @param {UserscriptUtilsErrStringCallback} callback The callback function * @param {boolean} [incUpdateURL=false] Whether to include the @updateURL tag * @param {boolean} [incDownloadURL=false] Whether to include the @downloadURL tag */ fromFile: function (file, callback, incUpdateURL, incDownloadURL) { getMetablock.fromFile(file, function (err, content) { if (err) { callback(err, null); } else { exp.fromString(content, callback, incUpdateURL, incDownloadURL); } }); } }; module.exports = exp; × Search results Close "},"global.html":{"id":"global.html","title":"Global","body":" Userscript Utils Modules userscript-utilsuserscript-utils/getMetablockuserscript-utils/getUpdateMetablock Global Global Global Type Definitions UserscriptUtilsErrStringCallback(err, result) Parameters: Name Type Description err Error | null An error in the operation, if any. result string | null Results of the operation. Will be null if an error occurred. Author: Art Source: index.js, line 1 × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Userscript Utils Modules userscript-utilsuserscript-utils/getMetablockuserscript-utils/getUpdateMetablock Global Global Modules × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" Userscript Utils Modules userscript-utilsuserscript-utils/getMetablockuserscript-utils/getUpdateMetablock Global Global Useful tools for developing userscripts - in both CLI and API modes (CLI uses asynchronous calls while API can use either). Table of Contents Features Installation Compatibility Usage CLI usage API usage Examples CLI examples Creating a .meta.js file from a .user.js file Extracting the entire metadata block API examples Grunt task example Features Extract the entire metadata block Extract the small portion of the metadata block that's required for .meta.js files (@updateURL) #Installation npm install -g userscript-utilsCompatibilityRequires node version &gt;=0.12 UsageCLI usage {lamb} userscript-utils --help Userscript utilities Usage: userscript-utils &lt;cmd&gt; [options] Pass -h or --help to any command to display command-specific help Commands: get-metablock - Retrieve the entire metadata block get-updateblock - Retrieve a shortened metadata block for .meta.js files {lamb} userscript-utils get-metablock --help Retrieve the entire metadata block Usage: userscript-utils get-metablock [options] Options: -h, --help - Display this help -i, --infile - Get contents from a file as opposed to STDIN -o, --outfile - Output result to a file as opposed to STDOUT {lamb} userscript-utils get-updateblock --help Retrieve the shortened metadata block required for .meta.js files and @updateURL Usage: userscript-utils get-updateblock [options] Options: -h, --help - Display this help -i, --infile - Get contents from a file as opposed to STDIN -o, --outfile - Output result to a file as opposed to STDOUT -u, --updateurl - Include the @updateURL tag in the output -d, --downloadurl - Include the @downloadURL tag in the output API usage[todo: inc link] ExamplesCLI examplesCreating a .meta.js file from a .user.js fileBare minimum: userscript-utils get-updateblock -i foo.user.js -o foo.meta.js; #or userscript-utils get-updateblock -i foo.user.js &gt;&gt; foo.meta.js;Include @updateURL &amp; @downloadURL: userscript-utils get-updateblock -i foo.user.js -o foo.meta.js -du; #or userscript-utils get-updateblock -i foo.user.js -du &gt;&gt; foo.meta.js;From STDIN: cat foo.user.js | userscript-utils get-updateblock -o foo.meta.js; #or cat foo.user.js | userscript-utils get-updateblock &gt;&gt; foo.meta.js;Or simply view the output by omitting the -o and --output options. Extracting the entire metadata blockSame options/arguments as above with the exception of -d, -u, --downloadurl and --updateurl being invalid: userscript-utils get-metablock -i foo.user.js -o foo.big.meta.js;API examples[todo] Grunt task example[todo] × Search results Close "},"module-userscript-utils.html":{"id":"module-userscript-utils.html","title":"Module: userscript-utils","body":" Userscript Utils Modules userscript-utilsuserscript-utils/getMetablockuserscript-utils/getUpdateMetablock Global Global Module: userscript-utils Useful tools for developing userscripts Author: Art Source: index.js, line 11 Members &lt;static&gt; getMetablock :module:userscript-utils/getMetablock Get the entire metadata block from a file Type: module:userscript-utils/getMetablock Source: index.js, line 21 &lt;static&gt; getUpdateMetablock :module:userscript-utils/getUpdateMetablock Get the part of the metadatablock that's required for .meta.js file and @updateURL Type: module:userscript-utils/getUpdateMetablock Source: index.js, line 26 × Search results Close "},"module-userscript-utils_getMetablock.html":{"id":"module-userscript-utils_getMetablock.html","title":"Module: userscript-utils/getMetablock","body":" Userscript Utils Modules userscript-utilsuserscript-utils/getMetablockuserscript-utils/getUpdateMetablock Global Global Module: userscript-utils/getMetablock Extract the entire metadata block Author: Art Source: lib/get-metablock.js, line 11 Methods &lt;static&gt; fromFile(file, callback) Asynchronously extracts the metablock from the given file Parameters: Name Type Description file string Path to the file callback UserscriptUtilsErrStringCallback The callback function Author: Art Source: lib/get-metablock.js, line 29 &lt;static&gt; fromFileSync(file) Synchronously extracts the metablock from the given file Parameters: Name Type Description file string Path to the file Author: Art Source: lib/get-metablock.js, line 19 Throws: Error If the metadata block is not found or a FS error occurds (e.g. file not found) Returns: The extracted metadata block Type string &lt;static&gt; fromString(contents, callback) Asynchronously extracts the metablock from the given string Parameters: Name Type Description contents string The string to extract from callback UserscriptUtilsErrStringCallback The callback function Author: Art Source: lib/get-metablock.js, line 69 &lt;static&gt; fromStringSync(contents) Synchronously extracts the metablock from the given string Parameters: Name Type Description contents string The string to extract from Author: Art Source: lib/get-metablock.js, line 51 Throws: If the metadata block is not found Type Error Returns: The extracted metadata block Type string × Search results Close "},"module-userscript-utils_getUpdateMetablock.html":{"id":"module-userscript-utils_getUpdateMetablock.html","title":"Module: userscript-utils/getUpdateMetablock","body":" Userscript Utils Modules userscript-utilsuserscript-utils/getMetablockuserscript-utils/getUpdateMetablock Global Global Module: userscript-utils/getUpdateMetablock Extract the part of the metablock that's needed for @updateURL requests Author: Art Source: lib/get-update-metablock.js, line 22 Methods &lt;static&gt; fromFile(file, callback [, incUpdateURL] [, incDownloadURL]) Asynchronously extract the update metablock from the given file Parameters: Name Type Argument Default Description file string Path to the file callback UserscriptUtilsErrStringCallback The callback function incUpdateURL boolean &lt;optional&gt; false Whether to include the @updateURL tag incDownloadURL boolean &lt;optional&gt; false Whether to include the @downloadURL tag Author: Art Source: lib/get-update-metablock.js, line 98 &lt;static&gt; fromFileSync(file [, incUpdateURL] [, incDownloadURL]) Synchronously extract the update metablock from the given file Parameters: Name Type Argument Default Description file string Path to the file incUpdateURL boolean &lt;optional&gt; false Whether to include the @updateURL tag incDownloadURL boolean &lt;optional&gt; false Whether to include the @downloadURL tag Author: Art Source: lib/get-update-metablock.js, line 87 Throws: if the metadata block is not found Type Error Returns: The reduced metadata block suitable for .meta.js files Type string &lt;static&gt; fromString(str, callback [, incUpdateURL] [, incDownloadURL]) Asynchronously extract the update metablock from the given string Parameters: Name Type Argument Default Description str string The string to extract from callback UserscriptUtilsErrStringCallback The callback function incUpdateURL boolean &lt;optional&gt; false Whether to include the @updateURL tag incDownloadURL boolean &lt;optional&gt; false Whether to include the @downloadURL tag Author: Art Source: lib/get-update-metablock.js, line 69 &lt;static&gt; fromStringSync(str [, incUpdateURL] [, incDownloadURL]) Synchronously extract the update metablock from the given string Parameters: Name Type Argument Default Description str string The string to extract from incUpdateURL boolean &lt;optional&gt; false Whether to include the @updateURL tag incDownloadURL boolean &lt;optional&gt; false Whether to include the @downloadURL tag Author: Art Source: lib/get-update-metablock.js, line 32 Throws: if the metadata block is not found Type Error Returns: The reduced metadata block suitable for .meta.js files Type string × Search results Close "}}

</script>

<script type="text/javascript">
    $(document).ready(function () {
        Searcher.init();
    });

    $(window).on("message", function (msg) {
        var msgData = msg.originalEvent.data;

        if (msgData.msgid != "docstrap.quicksearch.start") {
            return;
        }

        var results = Searcher.search(msgData.searchTerms);

        window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
    });
</script>
</body>
</html>
